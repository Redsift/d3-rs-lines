<html>
  <head>
    <style>
      
    body {
      margin: 0px;
    }

    </style>    
  </head>
  <body>
    <div id="elm"></div>
        
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="//static.redsift.io/reusable/d3-rs-theme/latest/d3-rs-theme.umd-es2015.min.js"></script>
    <script src="/d3-rs-lines.umd-es2015.min.js"></script>
    <script>

    'use strict';

    d3.select('#elm').call(d3_rs_lines.html('empty'));
    
    d3.select('#elm').datum([ 0, 1, 4, 6, 2, 8, 9 ]).call(d3_rs_lines.html('basic'));
    
    d3.select('#elm').datum([ 0, 1, 4, 6, 2, 8, 9 ]).call(d3_rs_lines.html('dark').theme('dark').onClick(d => console.log('Clicked:', d)));

    d3.select('#elm').datum([ 0, 1, 4, 6, 2, 8, 9 ]).call(d3_rs_lines.html('currency').fillArea(false).tickCountIndex(3).tickFormatIndex('($.1f'));

    d3.select('#elm').datum([ 0, 1, 4, -6, 2, 8, 9 ]).call(d3_rs_lines.html('currency-neg')
                    .fillArea(true)
                    .gridIndex(true)
                    .axisDisplayValue(true)
                    .tickCountIndex(3)
                    .tickFormatIndex('($.1f'));

    d3.select('#elm').datum([ 0, 1, 4, 6, 2, 8, 9 ]).call(d3_rs_lines.html('clipped-index')
                                                      .tickCountIndex(3)
                                                      .tickFormatIndex('($.1f')
                                                      .maxIndex(4)
                                                      .highlightIndex(3.2));

    d3.select('#elm').datum([ 0, 1, 4, 6, 2, 8, 9 ])
        .call(d3_rs_lines.html('clipped-value')
                .tickCountIndex(3)
                .tickFormatIndex('($.1f')
                .maxValue(4));

    d3.select('#elm').datum([ 0, 1 ]).call(d3_rs_lines.html('basic-legend').legend([ 'A', 'B' ]).symbol('symbolDiamond'));

    d3.select('#elm').datum([ 0, 1 ]).call(d3_rs_lines.html('voronoi-legend')
                      .legend([ 'Inline', 'Ignored' ])
                      .legendOrientation('voronoi')
                      .highlightIndex([ { l: 'small', v: [ 0.3 ] }, [ 0.6, 0.9 ] ]));

    d3.select('#elm').datum([ [ 1, 2, 4 ], [ 0, 1 ] ]).call(d3_rs_lines.html('multi').tickMinorIndex(30).tickMinorValue(10));


    var TIMES = [
      {
        "l" : 1461456000000,
        "v" : [
          12,
          3 
        ]
      },
      {
        "l" : 1461542400000,
        "v" : [
          5,
          11,
          4
        ]
      },
      {
        "l" : 1461628800000,
        "v" : [
          8,
          7
        ]
      },
      {
        "l" : 1461715200000,
        "v" : [
          18,
          5
        ]
      },
      {
        "l" : 1461801600000,
        "v" : [
          18,
          9
        ]
      },
      {
        "l" : 1461888000000,
        "v" : [
          8,
          17
        ]
      },
      {
        "l" : 1461974400000,
        "v" : [
          11,
          11
        ]
      },
      {
        "l" : 1462060800000,
        "v" : [
          8,
          2
        ]
      },
      {
        "l" : 1462147200000,
        "v" : [
          9,
          11
        ]
      },
      {
        "l" : 1462233600000,
        "v" : [
          8,
          9
        ]
      },
      {
        "l" : 1462320000000,
        "v" : [
          17,
          10
        ]
      },
      {
        "l" : 1462406400000,
        "v" : [
          19,
          14
        ]
      },
      {
        "l" : 1462492800000,
        "v" : [
          13,
          15
        ]
      },
      {
        "l" : 1462579200000,
        "v" : [
          17,
          6
        ]
      },
      {
        "l" : 1462665600000,
        "v" : [
          19,
          9
        ]
      },
      {
        "l" : 1462752000000,
        "v" : [
          9,
          1
        ]
      },
      {
        "l" : 1462838400000,
        "v" : [
          13,
          18
        ]
      },
      {
        "l" : 1462924800000,
        "v" : [
          7,
          8
        ]
      },
      {
        "l" : 1463011200000,
        "v" : [
          9,
          15
        ]
      },
      {
        "l" : 1463097600000,
        "v" : [
          10,
          2
        ]
      },
      {
        "l" : 1463184000000,
        "v" : [
          13,
          16
        ]
      },
      {
        "l" : 1463270400000,
        "v" : [
          14,
          13
        ]
      },
      {
        "l" : 1463356800000,
        "v" : [
          7,
          7
        ]
      },
      {
        "l" : 1463443200000,
        "v" : [
          7,
          6
        ]
      },
      {
        "l" : 1463529600000,
        "v" : [
          19,
          4
        ]
      },
      {
        "l" : 1463616000000,
        "v" : [
          15,
          9
        ]
      },
      {
        "l" : 1463702400000,
        "v" : [
          5,
          9
        ]
      },
      {
        "l" : 1463788800000,
        "v" : [
          17,
          12
        ]
      },
      {
        "l" : 1463875200000,
        "v" : [
          10,
          11
        ]
      },
      {
        "l" : 1463961600000,
        "v" : [
          19,
          13
        ]
      },
      {
        "l" : 1464048000000,
        "v" : [
          4,
          18
        ]
      },
      {
        "l" : 1464134400000,
        "v" : [
          12,
          2
        ]
      },
      {
        "l" : 1464220800000,
        "v" : [
          4,
          16
        ]
      },
      {
        "l" : 1464307200000,
        "v" : [
          14,
          5
        ]
      },
      {
        "l" : 1464393600000,
        "v" : [
          11,
          17
        ]
      },
      {
        "l" : 1464480000000,
        "v" : [
          3,
          12
        ]
      },
      {
        "l" : 1464566400000,
        "v" : [
          3,
          6
        ]
      },
      {
        "l" : 1464652800000,
        "v" : [
          1,
          4
        ]
      },
      {
        "l" : 1464739200000,
        "v" : [
          10,
          17
        ]
      },
      {
        "l" : 1464825600000,
        "v" : [
          2,
          10
        ]
      },
      {
        "l" : 1464912000000,
        "v" : [
          6,
          3
        ]
      },
      {
        "l" : 1464998400000,
        "v" : [
          4,
          12
        ]
      },
      {
        "l" : 1465084800000,
        "v" : [
          9,
          5
        ]
      },
      {
        "l" : 1465171200000,
        "v" : [
          16,
          4
        ]
      },
      {
        "l" : 1465257600000,
        "v" : [
          14,
          6
        ]
      },
      {
        "l" : 1465344000000,
        "v" : [
          5,
          16
        ]
      },
      {
        "l" : 1465430400000,
        "v" : [
          5,
          13
        ]
      },
      {
        "l" : 1465516800000,
        "v" : [
          18,
          13
        ]
      },
      {
        "l" : 1465603200000,
        "v" : [
          16,
          6
        ]
      },
      {
        "l" : 1465689600000,
        "v" : [
          14,
          18
        ]
      },
      {
        "l" : 1465776000000,
        "v" : [
          0,
          0
        ]
      },
      {
        "l" : 1465862400000,
        "v" : [
          0,
          0
        ]
      },
      {
        "l" : 1465948800000,
        "v" : [
          18,
          14
        ]
      },
      {
        "l" : 1466035200000,
        "v" : [
          2,
          1
        ]
      },
      {
        "l" : 1466121600000,
        "v" : [
          15,
          14
        ]
      },
      {
        "l" : 1466208000000,
        "v" : [
          11,
          5
        ]
      },
      {
        "l" : 1466294400000,
        "v" : [
          2,
          1
        ]
      },
      {
        "l" : 1466380800000,
        "v" : [
          5,
          7
        ]
      },
      {
        "l" : 1466467200000,
        "v" : [
          14,
          10,
          9
        ]
      },
      {
        "l" : 1466553600000,
        "v" : [
          11,
          9
        ]
      }
    ];
    
    /*
    console.log(TIMES.map((d, i) => d.l = i));
    
    console.log(encodeURIComponent(JSON.stringify(TIMES)));
    */
    // [ 'symbolCross', 'symbolStar' ]
    // 

    
    let curves = d3_rs_lines.html('curved')
                          .width(700) // scale it up
                          .tickCountIndex('utcFriday') // want monthly ticks
                          .labelTime('multi') // use the smart formatter
                          .legend([ 'A', 'B' ]) // add the legend
                          .stacked(true) // boolean or array of object keys
                          .niceIndex(false)
                          .theme('dark')
                          .tickFormatValue('($.0f');
                      
    d3.select('#elm')
      .datum(TIMES) 
        .call(curves);
     
    let area = d3_rs_lines.html('basic-time')
                    .scale(2)
                    .labelTime('%d-%b')
                    .curve('')
                    .fill([ 'green', 'red' ])
                    .symbol([ null, 'symbolStar' ])
                    .tickCountIndex('timeBiWeek') // timeWeek, timeBiWeek
                    .language('ru');
    
    d3.select('#elm').datum(TIMES).call(area);

    let pattern = d3_rs_theme.diagonals('highlight-fill', d3_rs_theme.patterns.diagonal1);
    pattern.foreground(d3_rs_theme.presentation10.lighter[d3_rs_theme.presentation10.names.blue]);
    pattern.background(d3_rs_theme.presentation10.standard[d3_rs_theme.presentation10.names.blue]);

    let bars = d3_rs_lines.html('bars')
                          .width(700) // scale it up
                          .tickCountIndex('utcMonth') // want monthly ticks
                          .labelTime(d3_rs_lines.timeMultiFormat({ month: '%b' })) // use the smart formatter
                          .legend([ 'A', 'B', null, 'Q' ]) // add the legend
                          .legendOrientation('bottom')
                          .curve('curveStep')
                          .fill([ d3_rs_theme.presentation10.standard[d3_rs_theme.presentation10.names.yellow], 
                                  d3_rs_theme.presentation10.standard[d3_rs_theme.presentation10.names.blue], 
                                  pattern.url() ])
                          .stacked(true)
                          .theme('dark')
                          .language('fr')
                          .tickFormatValue('($.0f');
                      
    d3.select('#elm').datum(TIMES).call(bars).call(pattern);

    let chart = d3_rs_lines.html('legend')
        .legend('Redsift') //add title to legend
        .legendOrientation('top') //legend orienatation set to voronoi which has the text displayed in the middle.
        .tickFormatValue('.2f') //value set to 2sf
          .scale(1.5);
        

    d3.select('#elm')
        .datum([1,2,3,10,20])
        .call(chart);

  let tips = d3_rs_lines.html('tips')
    .tickCountIndex('utcMonth')
    .labelTime('multi')
    .legend(['new', 'reduced'])
    .niceIndex(false)
    .animation('value')
    .curve('curveLinear')
    .symbol(['symbolSquare', 'symbolSquare'])
    .tipHtml((d, i, s) => {
      console.log('tipHtml: ', d, i, s);
    });    
    
    d3.select('#elm')
    .datum([{
      l: 1451606400000,
      v: [100, 50]
    },
    {
      l: 1454284800000,
      v: [155, 105]  
    }])
    .call(tips);

  let log = d3_rs_lines.html('log')
    .tickCountIndex('utcMonth')
    .labelTime('multi')
    .niceIndex(true)
    .curve('curveStep')
    .minValue(1)
    .logValue(10);

    d3.select('#elm')
    .datum([{
      l: 1451406400000,
      v: [1, 1]
    },{
      l: 1451606400000,
      v: [1000, 50]
    },
    {
      l: 1454284800000,
      v: [285, 151]  
    },
    {
      l: 1454989900000,
      v: [155, 20]  
    },
    {
      l: 1455989900000,
      v: [1, 1]  
    }])
    .call(log);

    </script>
  </body>
</html>
